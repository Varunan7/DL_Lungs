def histogram_equalization(image):

    # if it's not already grayscale Convert 
    if len(image.shape) == 3:
        gray = np.mean(image, axis=-1).astype(np.uint8)
    else:
        gray = image

     #Data Type Conversion:
    if gray.dtype != np.uint8:
        gray = gray.astype(np.uint8)

    # Apply histogram equalization
    equalized = cv2.equalizeHist(gray)

    return equalized

# Perform histogram equalization
equalized_images = []
for i,image in enumerate(data):
    equalized_image = histogram_equalization(image)
    
    if len(image.shape) == 3:
        equalized_image = np.stack([equalized_image] * 2, axis=-1)

    equalized_images.append(equalized_image)
